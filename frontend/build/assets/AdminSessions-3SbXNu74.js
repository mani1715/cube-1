import{r as e,j as s}from"./ui-vendor-BTYnCCVH.js";import{y as t,J as a,B as l,E as i,F as n,a5 as c,w as r}from"./index-zo8qnSR5.js";import"./query-vendor-GfKyIrYs.js";import"./react-vendor-CazXVoUc.js";const d=()=>{const[d,x]=e.useState([]),[m,p]=e.useState({pending:0,confirmed:0,completed:0,cancelled:0,total:0}),[o,h]=e.useState({total:0,page:1,limit:10,pages:0}),[g,u]=e.useState("all"),[j,y]=e.useState(!0),[f,N]=e.useState(null),[v,w]=e.useState(null),b=async()=>{try{y(!0),N(null);const e=await c.getSessions(o.page,o.limit,g);x(e.data),p(e.stats),h(e.pagination)}catch(e){N(e.message||"Failed to fetch sessions")}finally{y(!1)}};e.useEffect(()=>{b()},[o.page,g]);const C=async(e,s)=>{try{w(e),await c.updateSessionStatus(e,s),r.success("Session status updated successfully"),await b()}catch(t){r.error(t.message||"Failed to update status")}finally{w(null)}},S=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Session Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage therapy session bookings"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(t,{children:s.jsxs(a,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending Sessions"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:m.pending})]})}),s.jsx(t,{children:s.jsxs(a,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Confirmed Sessions"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:m.confirmed})]})}),s.jsx(t,{children:s.jsxs(a,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed Sessions"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:m.completed})]})}),s.jsx(t,{children:s.jsxs(a,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Sessions"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:m.total})]})})]}),s.jsx(t,{children:s.jsx(a,{className:"pt-6",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(l,{variant:"all"===g?"default":"outline",onClick:()=>{u("all"),h(e=>({...e,page:1}))},children:"All"}),s.jsx(l,{variant:"pending"===g?"default":"outline",onClick:()=>{u("pending"),h(e=>({...e,page:1}))},children:"Pending"}),s.jsx(l,{variant:"confirmed"===g?"default":"outline",onClick:()=>{u("confirmed"),h(e=>({...e,page:1}))},children:"Confirmed"}),s.jsx(l,{variant:"completed"===g?"default":"outline",onClick:()=>{u("completed"),h(e=>({...e,page:1}))},children:"Completed"}),s.jsx(l,{variant:"cancelled"===g?"default":"outline",onClick:()=>{u("cancelled"),h(e=>({...e,page:1}))},children:"Cancelled"})]})})}),s.jsxs(t,{children:[s.jsx(i,{children:s.jsx(n,{children:"Sessions List"})}),s.jsx(a,{children:j?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})}):f?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-600",children:f}),s.jsx(l,{onClick:b,className:"mt-4",children:"Retry"})]}):0===d.length?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"No sessions found"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preferred Time"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>{return s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),s.jsxs("div",{className:"text-sm text-gray-500",children:[e.age,", ",e.gender]})]}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:e.email}),s.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900 capitalize",children:e.therapy_type})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:e.preferred_time})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:(t=e.created_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S(e.status)}`,children:e.status})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:s.jsxs("div",{className:"flex gap-2",children:["confirmed"!==e.status&&s.jsx(l,{size:"sm",variant:"outline",onClick:()=>C(e.id,"confirmed"),disabled:v===e.id,className:"text-green-600 hover:text-green-700",children:"Confirm"}),"completed"!==e.status&&"cancelled"!==e.status&&s.jsx(l,{size:"sm",variant:"outline",onClick:()=>C(e.id,"completed"),disabled:v===e.id,className:"text-blue-600 hover:text-blue-700",children:"Complete"}),"cancelled"!==e.status&&"completed"!==e.status&&s.jsx(l,{size:"sm",variant:"outline",onClick:()=>C(e.id,"cancelled"),disabled:v===e.id,className:"text-red-600 hover:text-red-700",children:"Cancel"})]})})]},e.id);var t})})]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",d.length," of ",o.total," sessions"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(l,{variant:"outline",onClick:()=>h(e=>({...e,page:e.page-1})),disabled:1===o.page,children:"Previous"}),s.jsxs("span",{className:"px-4 py-2 text-sm",children:["Page ",o.page," of ",o.pages]}),s.jsx(l,{variant:"outline",onClick:()=>h(e=>({...e,page:e.page+1})),disabled:o.page>=o.pages,children:"Next"})]})]})]})})]})]})};export{d as default};
