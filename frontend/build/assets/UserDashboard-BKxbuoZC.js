import{r as e,j as s}from"./ui-vendor-BTYnCCVH.js";import{c as t,z as a,W as n,N as l,O as i,t as r,y as d,E as c,F as o,m,J as x,H as u,h,G as j,B as g,w as p}from"./index-zo8qnSR5.js";import{T as v,a as f,b as N,c as y}from"./tabs-4_P1JMxG.js";import{a as b}from"./react-vendor-CazXVoUc.js";import{C as w}from"./credit-card-DPXWsZWj.js";import"./query-vendor-GfKyIrYs.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=t("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),S=()=>{const{user:t,accessToken:S,isAuthenticated:_}=a(),D=b(),[E,C]=e.useState(null),[B,L]=e.useState([]),[A,M]=e.useState([]),[T,q]=e.useState([]),[F,H]=e.useState([]),[P,$]=e.useState(!0),[z,U]=e.useState("overview");e.useEffect(()=>{_||D("/login")},[_,D]),e.useEffect(()=>{if(!S)return;(async()=>{$(!0);try{const e=await n.getOverview(S);e.success&&C(e.overview)}catch(e){p.error("Failed to load dashboard data")}finally{$(!1)}})()},[S]),e.useEffect(()=>{"sessions"===z&&S&&0===B.length&&V()},[z,S]),e.useEffect(()=>{"events"===z&&S&&0===A.length&&O()},[z,S]),e.useEffect(()=>{"payments"===z&&S&&0===T.length&&W()},[z,S]),e.useEffect(()=>{"saved"===z&&S&&0===F.length&&Y()},[z,S]);const V=async()=>{if(S)try{const e=await n.getUserSessions(S);e.success&&L(e.sessions)}catch(e){}},O=async()=>{if(S)try{const e=await n.getUserEvents(S);e.success&&M(e.events)}catch(e){}},W=async()=>{if(S)try{const e=await n.getUserPayments(S);e.success&&q(e.payments)}catch(e){}},Y=async()=>{if(S)try{const e=await n.getSavedBlogs(S);e.success&&H(e.saved_blogs)}catch(e){}},G=e=>{const t={confirmed:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-800 dark:text-green-200"},pending:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-800 dark:text-yellow-200"},cancelled:{bg:"bg-red-100 dark:bg-red-900",text:"text-red-800 dark:text-red-200"},completed:{bg:"bg-blue-100 dark:bg-blue-900",text:"text-blue-800 dark:text-blue-200"},success:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-800 dark:text-green-200"},failed:{bg:"bg-red-100 dark:bg-red-900",text:"text-red-800 dark:text-red-200"}},a=t[null==e?void 0:e.toLowerCase()]||t.pending;return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.bg} ${a.text}`,children:e})};return _?P?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(l,{}),s.jsx("div",{className:"container mx-auto px-4 pt-32 pb-20",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(i,{className:"w-8 h-8 animate-spin text-primary"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(r,{title:`Dashboard - ${null==t?void 0:t.name} - A-Cube`,description:"Manage your sessions, events, payments, and saved content on A-Cube Mental Health Platform."}),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(l,{}),s.jsxs("div",{className:"container mx-auto px-4 pt-32 pb-20",children:[s.jsxs("div",{className:"mb-8 animate-fade-in",children:[s.jsxs("h1",{className:"text-3xl md:text-4xl font-display font-bold mb-2",children:["Welcome back, ",null==t?void 0:t.name,"! ðŸ‘‹"]}),s.jsx("p",{className:"text-muted-foreground",children:"Here's an overview of your mental wellness journey"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs(d,{className:"animate-slide-in-up",style:{animationDelay:"0.1s"},children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Sessions"}),s.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(x,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==E?void 0:E.total_sessions)||0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==E?void 0:E.upcoming_sessions)||0," upcoming"]})]})]}),s.jsxs(d,{className:"animate-slide-in-up",style:{animationDelay:"0.2s"},children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Events Attended"}),s.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(x,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==E?void 0:E.total_events)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total registrations"})]})]}),s.jsxs(d,{className:"animate-slide-in-up",style:{animationDelay:"0.3s"},children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Saved Content"}),s.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(x,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==E?void 0:E.saved_blogs)||0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==E?void 0:E.liked_blogs)||0," liked articles"]})]})]}),s.jsxs(d,{className:"animate-slide-in-up",style:{animationDelay:"0.4s"},children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Spent"}),s.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(x,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["â‚¹",(null==E?void 0:E.total_spent)||0]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==E?void 0:E.total_payments)||0," transactions"]})]})]})]}),s.jsxs(d,{className:"animate-slide-in-up",style:{animationDelay:"0.5s"},children:[s.jsxs(c,{children:[s.jsx(o,{children:"Your Activity"}),s.jsx(j,{children:"View and manage your sessions, events, payments, and saved content"})]}),s.jsx(x,{children:s.jsxs(v,{value:z,onValueChange:U,className:"w-full",children:[s.jsxs(f,{className:"grid w-full grid-cols-4",children:[s.jsx(N,{value:"sessions",children:"Sessions"}),s.jsx(N,{value:"events",children:"Events"}),s.jsx(N,{value:"payments",children:"Payments"}),s.jsx(N,{value:"saved",children:"Saved"})]}),s.jsx(y,{value:"sessions",className:"space-y-4 mt-4",children:0===B.length?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(m,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No sessions booked yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Book your first therapy session to get started"}),s.jsx(g,{className:"mt-4",onClick:()=>D("/book-session"),children:"Book Session"})]}):s.jsx("div",{className:"space-y-3",children:B.map(e=>s.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e.psychologist_name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(e.session_date).toLocaleDateString()," at ",e.session_time]})]}),G(e.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[e.session_type," Session"]})]},e.id))})}),s.jsx(y,{value:"events",className:"space-y-4 mt-4",children:0===A.length?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(u,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No events registered yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Check out our upcoming events and workshops"}),s.jsx(g,{className:"mt-4",onClick:()=>D("/events"),children:"Browse Events"})]}):s.jsx("div",{className:"space-y-3",children:A.map(e=>s.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e.event.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.event.date).toLocaleDateString()})]}),G(e.event.status)]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.event.location})]},e.registration.id))})}),s.jsx(y,{value:"payments",className:"space-y-4 mt-4",children:0===T.length?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(w,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No payment history yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Your transactions will appear here"})]}):s.jsx("div",{className:"space-y-3",children:T.map(e=>s.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e.item_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-green-600",children:["â‚¹",e.amount.toFixed(2)]}),G(e.status)]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground font-mono",children:["ID: ",e.transaction_id.slice(0,16),"..."]})]},e.transaction_id))})}),s.jsx(y,{value:"saved",className:"space-y-4 mt-4",children:0===F.length?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(h,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No saved articles yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Save articles from our blog to read later"}),s.jsx(g,{className:"mt-4",onClick:()=>D("/blogs"),children:"Browse Blogs"})]}):s.jsx("div",{className:"space-y-3",children:F.map(e=>s.jsx("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium mb-1",children:e.blog.title}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.blog.excerpt}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Saved on ",new Date(e.saved_at).toLocaleDateString()]})]}),s.jsx(g,{variant:"ghost",size:"sm",onClick:()=>D(`/blogs/${e.blog.id}`),children:s.jsx(k,{className:"w-4 h-4"})})]})},e.blog.id))})})]})})]})]})]})]}):null};export{S as default};
