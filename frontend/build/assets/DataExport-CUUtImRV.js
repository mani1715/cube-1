import{r as e,j as s}from"./ui-vendor-BTYnCCVH.js";import{L as a,t,v as r,k as l,B as o,C as i,w as d}from"./index-zo8qnSR5.js";import{I as n}from"./input-C6PIaYiN.js";import{c}from"./bg-contact-oC4xQH4a.js";import{C as m}from"./circle-alert-DgUqQIyf.js";import"./query-vendor-GfKyIrYs.js";import"./react-vendor-CazXVoUc.js";const x=()=>{const[x,u]=e.useState(""),[p,h]=e.useState(!1),[j,b]=e.useState(null);return s.jsxs(a,{children:[s.jsx(t,{title:"Data Export Request",description:"Request a complete export of your personal data from A-Cube Mental Health Platform.",keywords:["data export","GDPR","personal data","privacy rights"]}),s.jsxs("section",{className:"relative py-20 md:py-28 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${c})`}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/95 via-background/80 to-background/70"}),s.jsx("div",{className:"container mx-auto px-4 relative z-10",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx("h1",{className:"font-display text-4xl md:text-5xl font-semibold text-foreground mb-6",children:"Data Export Request"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Exercise your right to data portability. Request a complete copy of all your personal data stored in our system."})]})})]}),s.jsx("section",{className:"py-16 md:py-24",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:j?s.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 text-green-500 mb-6",children:[s.jsx(i,{className:"w-8 h-8"}),s.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Export Complete!"})]}),s.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-6 mb-6",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Your data export has been generated successfully. Click the button below to download your data as a JSON file."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Export Date:"}),s.jsx("p",{className:"font-semibold text-foreground",children:new Date(j.export_date).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Email:"}),s.jsx("p",{className:"font-semibold text-foreground",children:j.email})]})]})]}),s.jsxs(o,{onClick:()=>{if(!j)return;const e=JSON.stringify(j,null,2),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`a-cube-data-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),d.success("Download started!")},className:"w-full mb-4",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Download Data Export (JSON)"]}),s.jsx(o,{variant:"outline",onClick:()=>{b(null),u("")},className:"w-full",children:"Request Another Export"}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(m,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Important"}),s.jsx("p",{children:"Please store this data securely. It contains all your personal information from our platform."})]})]})})]}):s.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-primary mb-4",children:[s.jsx(r,{className:"w-5 h-5"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Request Your Data"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Enter your email address to receive a complete export of your personal data, including:"}),s.jsxs("ul",{className:"list-disc list-inside text-muted-foreground mt-3 space-y-1",children:[s.jsx("li",{children:"Session bookings and appointments"}),s.jsx("li",{children:"Contact form submissions"}),s.jsx("li",{children:"Volunteer applications"}),s.jsx("li",{children:"Event registrations"}),s.jsx("li",{children:"Career applications"})]})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x){h(!0);try{const e="https://jcksajlpyvbbpipmtvep.supabase.co",s=await fetch(`${e}/api/phase9/compliance/data-export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,data_types:["all"]})}),a=await s.json();s.ok?(b(a.export_data),d.success("Data export generated successfully!")):d.error(a.detail||"Failed to export data")}catch(s){d.error("An error occurred while exporting data")}finally{h(!1)}}else d.error("Please enter your email address")},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(l,{htmlFor:"email",children:"Email Address"}),s.jsx(n,{id:"email",type:"email",placeholder:"your.email@example.com",value:x,onChange:e=>u(e.target.value),required:!0,className:"mt-1"})]}),s.jsx(o,{type:"submit",className:"w-full",disabled:p,children:p?"Generating Export...":"Generate Data Export"})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(m,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Privacy Notice"}),s.jsx("p",{children:"Your data export will be generated instantly. Please ensure you save it securely as it contains all your personal information."})]})]})})]})})})})]})};export{x as default};
