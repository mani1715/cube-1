import{j as e,r as s}from"./ui-vendor-BTYnCCVH.js";import{u as a,L as t,a as l,O as r}from"./react-vendor-CazXVoUc.js";import{c as n,Y as i,m as o,U as c,_ as d,x as m,$ as x,a0 as h,a1 as u,O as p,a2 as g,g as b,s as y,d as j,K as f}from"./index-zo8qnSR5.js";import{F as v}from"./file-text-ttGhQqz0.js";import{B as N}from"./briefcase-CJnAw1IQ.js";import{M as w}from"./message-square-7sh9Y6Z0.js";import{t as k}from"./toast-BC5haPyC.js";import{I as S}from"./input-C6PIaYiN.js";import{S as C}from"./search-BM6hKPMp.js";import"./query-vendor-GfKyIrYs.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=n("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),L=n("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),$=()=>{const s=a(),l=[{icon:i,label:"Dashboard",path:"/admin"},{icon:L,label:"Sessions",path:"/admin/sessions"},{icon:o,label:"Events",path:"/admin/events"},{icon:v,label:"Blogs",path:"/admin/blogs"},{icon:c,label:"Psychologists",path:"/admin/psychologists"},{icon:d,label:"Volunteers",path:"/admin/volunteers"},{icon:N,label:"Jobs",path:"/admin/jobs"},{icon:w,label:"Contacts",path:"/admin/contacts"},{icon:m,label:"Error Tracking",path:"/admin/errors"},{icon:x,label:"Settings",path:"/admin/settings"}];return e.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"A-Cube Admin"})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1",children:l.map(a=>{const l=a.icon,r="/admin"===(n=a.path)?s.pathname===n:s.pathname.startsWith(n);var n;return e.jsxs(t,{to:a.path,className:`\n                flex items-center gap-3 px-4 py-3 rounded-lg transition-colors\n                ${r?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}\n              `,children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.path)})}),e.jsx("div",{className:"p-4 border-t border-gray-200 text-sm text-gray-500",children:e.jsx("p",{children:"Â© 2024 A-Cube"})})]})},A=()=>{const[a,t]=s.useState(""),[r,n]=s.useState({}),[i,o]=s.useState(!1),[c,d]=s.useState(!1),[m,x]=s.useState(0),g=s.useRef(null),b=l(),y=s.useRef(null);s.useEffect(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.useEffect(()=>(y.current&&clearTimeout(y.current),a.trim().length<2?(n({}),x(0),void d(!1)):(y.current=setTimeout(async()=>{o(!0),d(!0);try{const e=await h.globalSearch(a);n(e.results||{}),x(e.total||0)}catch(e){n({}),x(0)}finally{o(!1)}},300),()=>{y.current&&clearTimeout(y.current)})),[a]);const j=()=>{t(""),n({}),x(0),d(!1)},f=(e,s)=>{var a;return e.title?e.title:e.full_name?e.full_name:e.email?e.email:`${s} - ${null==(a=e.id)?void 0:a.substring(0,8)}`},v=e=>({sessions:"Sessions",events:"Events",blogs:"Blogs",psychologists:"Psychologists",volunteers:"Volunteers",jobs:"Jobs",contacts:"Contacts"}[e]||e);return e.jsxs("div",{ref:g,className:"relative w-full max-w-md","data-testid":"global-search",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(S,{type:"text",placeholder:"Search across all entities...",value:a,onChange:e=>t(e.target.value),className:"pl-10 pr-10 bg-gray-50 border-gray-200","data-testid":"global-search-input"}),a&&e.jsx("button",{onClick:j,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","data-testid":"clear-search-btn",children:e.jsx(u,{className:"h-4 w-4"})})]}),c&&e.jsx("div",{className:"absolute top-full mt-2 w-full bg-white rounded-lg shadow-lg border border-gray-200 max-h-96 overflow-y-auto z-50",children:i?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(p,{className:"h-6 w-6 animate-spin text-gray-400"})}):0===m?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No results found for "',a,'"']}):e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-500 border-b",children:["Found ",m," result",m>1?"s":""]}),Object.entries(r).map(([s,a])=>e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:"px-4 py-2 text-xs font-semibold text-gray-700 bg-gray-50",children:[v(s)," (",a.length,")"]}),a.map(a=>e.jsxs("button",{onClick:()=>(e=>{const s={sessions:"/admin/sessions",events:"/admin/events",blogs:"/admin/blogs",psychologists:"/admin/psychologists",volunteers:"/admin/volunteers",jobs:"/admin/jobs",contacts:"/admin/contacts"}[e];s&&(b(s),j())})(s,a.id),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors","data-testid":`search-result-${s}-${a.id}`,children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:f(a,s)}),a.email&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.email})]},a.id))]},s))]})})]})},M=()=>{var s;const a=l(),{admin:t,logout:r}=g();return e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Panel"})}),e.jsx("div",{className:"flex-1 max-w-2xl",children:e.jsx(A,{})}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsxs("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors relative","aria-label":"Notifications",children:[e.jsx(E,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:(null==t?void 0:t.email)||"Admin"}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium "+("super_admin"===(null==t?void 0:t.role)?"bg-purple-100 text-purple-700":"admin"===(null==t?void 0:t.role)?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:["super_admin"===(null==t?void 0:t.role)?e.jsx(j,{className:"w-4 h-4"}):"viewer"===(null==t?void 0:t.role)?e.jsx(f,{className:"w-4 h-4"}):e.jsx(b,{className:"w-4 h-4"}),(null==(s=null==t?void 0:t.role)?void 0:s.replace("_"," "))||"Admin"]})]}),e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-white"})})]}),e.jsxs("button",{onClick:async()=>{try{await r(),k.success("Logged out successfully"),a("/admin/login")}catch(e){k.error("Logout failed","Please try again")}},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors","aria-label":"Logout",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})})},_=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx($,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(M,{}),e.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e.jsx(r,{})})]})]});
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{_ as default};
