import{r as e,j as t}from"./ui-vendor-BTYnCCVH.js";import{c as s,af as a,y as i,E as r,F as l,J as n,B as c}from"./index-zo8qnSR5.js";import{T as x}from"./loading-skeleton-BH0E5eiA.js";import{E as d}from"./empty-state-DopUaX1E.js";import"./query-vendor-GfKyIrYs.js";import"./react-vendor-CazXVoUc.js";import"./search-BM6hKPMp.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=s("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),m=()=>{const[s,m]=e.useState([]),[o,h]=e.useState({total:0,page:1,limit:50,pages:0}),[g,y]=e.useState(!0),[j,u]=e.useState(null);e.useEffect(()=>{f()},[o.page]);const f=async()=>{try{y(!0),u(null);const e=await a.getLogs(o.page,o.limit);m(e.data),h(e.pagination)}catch(e){u(e.message||"Failed to fetch logs")}finally{y(!1)}},N=e=>{switch(e){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"status_change":return"bg-yellow-100 text-yellow-800";case"export":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Activity Logs"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Audit trail of admin actions"})]}),t.jsx(p,{className:"w-8 h-8 text-gray-400"})]}),t.jsxs(i,{children:[t.jsx(r,{children:t.jsx(l,{children:"Recent Activity"})}),t.jsx(n,{children:g?t.jsx(x,{}):j?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600",children:j}),t.jsx(c,{onClick:f,className:"mt-4",children:"Retry"})]}):0===s.length?t.jsx(d,{icon:"inbox",title:"No activity logs yet",description:"Admin actions will appear here once they start performing operations"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{return t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:(s=e.timestamp,new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:e.admin_email})}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${N(e.action)}`,children:e.action})}),t.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900 capitalize",children:e.entity}),t.jsx("div",{className:"text-xs text-gray-500",children:e.entity_id})]}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"text-sm text-gray-600",children:e.details||"-"})})]},e.id);var s})})]})}),t.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",s.length," of ",o.total," logs"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(c,{variant:"outline",onClick:()=>h(e=>({...e,page:e.page-1})),disabled:1===o.page,children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 text-sm",children:["Page ",o.page," of ",o.pages]}),t.jsx(c,{variant:"outline",onClick:()=>h(e=>({...e,page:e.page+1})),disabled:o.page>=o.pages,children:"Next"})]})]})]})})]})]})};export{m as default};
