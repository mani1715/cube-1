import{r as e,j as s}from"./ui-vendor-BTYnCCVH.js";import{B as a,_ as i,y as l,J as t,E as c,F as n,D as r,n as d,o,p as x,k as m,aa as h,ab as p,ac as g,ad as j,w as u}from"./index-zo8qnSR5.js";import{I as v}from"./input-C6PIaYiN.js";import{T as y}from"./textarea-B8E-4Pp2.js";import{T as f}from"./loading-skeleton-BH0E5eiA.js";import{E as N}from"./empty-state-DopUaX1E.js";import"./query-vendor-GfKyIrYs.js";import"./react-vendor-CazXVoUc.js";import"./search-BM6hKPMp.js";const _=()=>{const[_,b]=e.useState([]),[w,C]=e.useState({total:0,active:0,inactive:0}),[k,F]=e.useState({total:0,page:1,limit:10,pages:0}),[P,S]=e.useState("all"),[z,A]=e.useState(!0),[E,I]=e.useState(null),[D,L]=e.useState(!1),[T,U]=e.useState(!1),[B,O]=e.useState(!1),[J,M]=e.useState(null),[Y,q]=e.useState(!1),[R,G]=e.useState(!1),[H,K]=e.useState({full_name:"",specialization:"",license_number:"",email:"",phone:"",bio:"",experience_years:0,profile_image:"",is_active:!0}),Q=async()=>{try{A(!0),I(null);const e="all"===P?void 0:"active"===P,s=await g.getPsychologists(k.page,k.limit,e);b(s.data),C(s.stats),F(s.pagination)}catch(e){I(e.message||"Failed to fetch psychologists")}finally{A(!1)}};e.useEffect(()=>{Q()},[k.page,P]);const V=()=>{K({full_name:"",specialization:"",license_number:"",email:"",phone:"",bio:"",experience_years:0,profile_image:"",is_active:!0})},W=async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a)try{G(!0);const e=await j.uploadFile(a);K({...H,profile_image:e.url}),u.success("Image uploaded successfully")}catch(i){u.error(i.message||"Failed to upload image")}finally{G(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Psychologists Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage psychologist profiles and applications"})]}),s.jsxs(a,{onClick:()=>{V(),L(!0)},className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-4 h-4"}),"Add Psychologist"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(l,{children:s.jsxs(t,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Psychologists"}),s.jsx("p",{className:"text-3xl font-bold text-primary mt-2",children:w.total})]})}),s.jsx(l,{children:s.jsxs(t,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:w.active})]})}),s.jsx(l,{children:s.jsxs(t,{className:"pt-6",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Inactive"}),s.jsx("p",{className:"text-3xl font-bold text-gray-600 mt-2",children:w.inactive})]})})]}),s.jsx(l,{children:s.jsx(t,{className:"pt-6",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{variant:"all"===P?"default":"outline",onClick:()=>{S("all"),F(e=>({...e,page:1}))},children:"All"}),s.jsx(a,{variant:"active"===P?"default":"outline",onClick:()=>{S("active"),F(e=>({...e,page:1}))},children:"Active"}),s.jsx(a,{variant:"inactive"===P?"default":"outline",onClick:()=>{S("inactive"),F(e=>({...e,page:1}))},children:"Inactive"})]})})}),s.jsxs(l,{children:[s.jsx(c,{children:s.jsx(n,{children:"Psychologists List"})}),s.jsx(t,{children:z?s.jsx(f,{}):E?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-red-600",children:E}),s.jsx(a,{onClick:Q,className:"mt-4",children:"Retry"})]}):0===_.length?s.jsx(N,{icon:s.jsx(i,{className:"w-12 h-12"}),title:"No psychologists found",description:"Start by adding your first psychologist"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profile"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specialization"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Experience"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[e.profile_image?s.jsx("img",{src:e.profile_image,alt:e.full_name,className:"w-10 h-10 rounded-full object-cover mr-3"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center mr-3",children:s.jsx(i,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["License: ",e.license_number]})]})]})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:e.specialization})}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:e.email}),s.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[e.experience_years," years"]})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx(a,{variant:"outline",size:"sm",className:"mr-2",onClick:()=>(e=>{M(e),K({full_name:e.full_name,specialization:e.specialization,license_number:e.license_number,email:e.email,phone:e.phone,bio:e.bio,experience_years:e.experience_years,profile_image:e.profile_image||"",is_active:e.is_active}),U(!0)})(e),children:"Edit"}),s.jsx(a,{variant:"outline",size:"sm",className:"text-red-600",onClick:()=>(e=>{M(e),O(!0)})(e),children:"Delete"})]})]},e.id))})]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",_.length," of ",k.total," psychologists"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{variant:"outline",onClick:()=>F(e=>({...e,page:e.page-1})),disabled:1===k.page,children:"Previous"}),s.jsxs("span",{className:"px-4 py-2 text-sm",children:["Page ",k.page," of ",k.pages]}),s.jsx(a,{variant:"outline",onClick:()=>F(e=>({...e,page:e.page+1})),disabled:k.page>=k.pages,children:"Next"})]})]})]})})]}),s.jsx(r,{open:D,onOpenChange:L,children:s.jsxs(d,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(o,{children:s.jsx(x,{children:"Add New Psychologist"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"full_name",children:"Full Name *"}),s.jsx(v,{id:"full_name",value:H.full_name,onChange:e=>K({...H,full_name:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"specialization",children:"Specialization *"}),s.jsx(v,{id:"specialization",value:H.specialization,onChange:e=>K({...H,specialization:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"license_number",children:"License Number *"}),s.jsx(v,{id:"license_number",value:H.license_number,onChange:e=>K({...H,license_number:e.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"email",children:"Email *"}),s.jsx(v,{id:"email",type:"email",value:H.email,onChange:e=>K({...H,email:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"phone",children:"Phone *"}),s.jsx(v,{id:"phone",value:H.phone,onChange:e=>K({...H,phone:e.target.value})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"experience_years",children:"Years of Experience *"}),s.jsx(v,{id:"experience_years",type:"number",value:H.experience_years,onChange:e=>K({...H,experience_years:parseInt(e.target.value)||0})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"bio",children:"Bio"}),s.jsx(y,{id:"bio",rows:4,value:H.bio,onChange:e=>K({...H,bio:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"profile_image",children:"Profile Image"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(v,{id:"profile_image",type:"file",accept:"image/*",onChange:W,disabled:R}),R&&s.jsx("span",{className:"text-sm text-gray-500",children:"Uploading..."})]}),H.profile_image&&s.jsx("img",{src:H.profile_image,alt:"Preview",className:"w-20 h-20 rounded-full object-cover mt-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(h,{checked:H.is_active,onCheckedChange:e=>K({...H,is_active:e})}),s.jsx(m,{children:"Active"})]})]}),s.jsxs(p,{children:[s.jsx(a,{variant:"outline",onClick:()=>L(!1),disabled:Y,children:"Cancel"}),s.jsx(a,{onClick:async()=>{try{q(!0),await g.createPsychologist(H),u.success("Psychologist created successfully"),L(!1),Q(),V()}catch(e){u.error(e.message||"Failed to create psychologist")}finally{q(!1)}},disabled:Y,children:Y?"Creating...":"Create Psychologist"})]})]})}),s.jsx(r,{open:T,onOpenChange:U,children:s.jsxs(d,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(o,{children:s.jsx(x,{children:"Edit Psychologist"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_full_name",children:"Full Name *"}),s.jsx(v,{id:"edit_full_name",value:H.full_name,onChange:e=>K({...H,full_name:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_specialization",children:"Specialization *"}),s.jsx(v,{id:"edit_specialization",value:H.specialization,onChange:e=>K({...H,specialization:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_license_number",children:"License Number *"}),s.jsx(v,{id:"edit_license_number",value:H.license_number,onChange:e=>K({...H,license_number:e.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_email",children:"Email *"}),s.jsx(v,{id:"edit_email",type:"email",value:H.email,onChange:e=>K({...H,email:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_phone",children:"Phone *"}),s.jsx(v,{id:"edit_phone",value:H.phone,onChange:e=>K({...H,phone:e.target.value})})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_experience_years",children:"Years of Experience *"}),s.jsx(v,{id:"edit_experience_years",type:"number",value:H.experience_years,onChange:e=>K({...H,experience_years:parseInt(e.target.value)||0})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_bio",children:"Bio"}),s.jsx(y,{id:"edit_bio",rows:4,value:H.bio,onChange:e=>K({...H,bio:e.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit_profile_image",children:"Profile Image"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(v,{id:"edit_profile_image",type:"file",accept:"image/*",onChange:W,disabled:R}),R&&s.jsx("span",{className:"text-sm text-gray-500",children:"Uploading..."})]}),H.profile_image&&s.jsx("img",{src:H.profile_image,alt:"Preview",className:"w-20 h-20 rounded-full object-cover mt-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(h,{checked:H.is_active,onCheckedChange:e=>K({...H,is_active:e})}),s.jsx(m,{children:"Active"})]})]}),s.jsxs(p,{children:[s.jsx(a,{variant:"outline",onClick:()=>U(!1),disabled:Y,children:"Cancel"}),s.jsx(a,{onClick:async()=>{if(J)try{q(!0),await g.updatePsychologist(J.id,H),u.success("Psychologist updated successfully"),U(!1),Q()}catch(e){u.error(e.message||"Failed to update psychologist")}finally{q(!1)}},disabled:Y,children:Y?"Updating...":"Update Psychologist"})]})]})}),s.jsx(r,{open:B,onOpenChange:O,children:s.jsxs(d,{children:[s.jsx(o,{children:s.jsx(x,{children:"Confirm Deletion"})}),s.jsxs("p",{className:"py-4",children:["Are you sure you want to delete ",s.jsx("strong",{children:null==J?void 0:J.full_name}),"? This action cannot be undone."]}),s.jsxs(p,{children:[s.jsx(a,{variant:"outline",onClick:()=>O(!1),disabled:Y,children:"Cancel"}),s.jsx(a,{variant:"destructive",onClick:async()=>{if(J)try{q(!0),await g.deletePsychologist(J.id),u.success("Psychologist deleted successfully"),O(!1),Q()}catch(e){u.error(e.message||"Failed to delete psychologist")}finally{q(!1)}},disabled:Y,children:Y?"Deleting...":"Delete"})]})]})})]})};export{_ as default};
